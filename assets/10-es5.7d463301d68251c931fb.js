function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{X3zk:function(t,e,n){"use strict";n.r(e),n.d(e,"LoginModule",(function(){return O}));var i=n("PCNd"),o=n("tyNb"),r=n("3Pt+"),s=n("d8ZE"),c=n("AytR"),a=n("fXoL"),b=n("8PDw"),u=n("1jTv"),p=n("ofXK");function l(t,e){if(1&t){var n=a.Qb();a.Nb(0),a.Pb(1,"form",4),a.Xb("ngSubmit",(function(){return a.dc(n),a.Zb().requestOtp()})),a.Pb(2,"h1",5),a.ic(3,"\u0627\u06af\u0631 \u062f\u0631 \u0641\u06cc\u0644\u06cc\u0645\u0648 \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062f\u0627\u0631\u06cc\u062f\u060c \u0648\u0627\u0631\u062f \u0634\u0648\u06cc\u062f:"),a.Ob(),a.Pb(4,"div",6),a.Pb(5,"div",7),a.Pb(6,"span",8),a.ic(7,"+98"),a.Ob(),a.Ob(),a.Lb(8,"input",9),a.Ob(),a.Pb(9,"button",10),a.ic(10,"\u0648\u0631\u0648\u062f"),a.Ob(),a.Ob(),a.Mb()}if(2&t){var i=a.Zb();a.zb(1),a.ac("formGroup",i.requestOtpForm)}}function f(t,e){if(1&t){var n=a.Qb();a.Nb(0),a.Pb(1,"form",4),a.Xb("ngSubmit",(function(){return a.dc(n),a.Zb().verifyOtp()})),a.Pb(2,"h1",5),a.ic(3,"\u06a9\u062f \u0641\u0631\u0633\u062a\u0627\u062f\u0647 \u0634\u062f\u0647 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f:"),a.Ob(),a.Pb(4,"div",6),a.Pb(5,"div",7),a.Pb(6,"span",8),a.Lb(7,"img",11),a.Ob(),a.Ob(),a.Lb(8,"input",12),a.Ob(),a.Pb(9,"button",10),a.ic(10,"\u0627\u062f\u0627\u0645\u0647"),a.Ob(),a.Pb(11,"div",13),a.Pb(12,"span",14),a.Xb("click",(function(){return a.dc(n),a.Zb().firstStep()})),a.ic(13,"\u0628\u0627\u0632\u06af\u0634\u062a"),a.Ob(),a.Ob(),a.Ob(),a.Mb()}if(2&t){var i=a.Zb();a.zb(1),a.ac("formGroup",i.verifyOtpForm)}}var d,g,m,h=[{path:"",component:(d=function(){function t(e,n,i,o){_classCallCheck(this,t),this.formBuilder=e,this.authService=n,this.snackbarService=i,this.router=o,this.step=1,this.requestOtpForm=this.formBuilder.group({mobile:["",[r.i.required,r.i.minLength(10),function(t){return/^[0-9]+$/g.test(t.value)?null:{mobile:"must be numeric"}}]]}),this.verifyOtpForm=this.formBuilder.group({otp:["",[r.i.required,r.i.minLength(6),function(t){return/^[0-9]+$/g.test(t.value)?null:{otp:"must be numeric"}}]]}),this.guid="",this.tempId="",this.mobile=""}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"requestOtp",value:function(){var t=this,e=this.requestOtpForm.controls.mobile;s.a.i("LoginComponent#requestOtp",e),e.invalid?this.snackbarService.showMessage("\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 \u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 10 \u0631\u0642\u0645 \u0628\u0627\u0634\u062f"):(this.mobile="0".concat(e.value),this.authService.requestOtp(this.mobile).subscribe({next:function(e){s.a.i("AuthService#requestOtp",e),e.success&&(t.guid=e.data.guid,t.tempId=e.data.tempId,t.step=2)}}))}},{key:"verifyOtp",value:function(){var t=this,e=this.verifyOtpForm.controls.otp;s.a.i("LoginComponent#verifyOtp",e),e.invalid?this.snackbarService.showMessage("\u06a9\u062f \u0628\u0627\u06cc\u062f \u0634\u0627\u0645\u0644 6 \u0631\u0642\u0645 \u0628\u0627\u0634\u062f"):this.authService.verifyOtp(this.guid,this.tempId,this.mobile,e.value).subscribe({next:function(e){s.a.i("AuthService#verifyOtp",e),e.success&&(localStorage.setItem("jwt_token",e.data.token),c.a.production||localStorage.setItem("b_jwt_token",e.data.token),t.router.navigate(["home"]))}})}},{key:"firstStep",value:function(){this.step=1}}]),t}(),d.\u0275fac=function(t){return new(t||d)(a.Kb(r.b),a.Kb(b.a),a.Kb(u.a),a.Kb(o.e))},d.\u0275cmp=a.Eb({type:d,selectors:[["app-login"]],decls:5,vars:2,consts:[[1,"body","text-center"],[1,"form-signin"],["src","../../assets/images/filimo_logo.svg","alt","","width","72","height","72",1,"mb-4"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"h6","mb-3","font-weight-normal"],["dir","ltr",1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","placeholder","Mobile","aria-label","Mobile","formControlName","mobile",1,"form-control"],["type","submit",1,"mt-3","btn","btn-lg","btn-success","btn-block"],["src","../../assets/images/password.svg","alt","","width","24px","height","24px"],["type","text","placeholder","Code","aria-label","Code","formControlName","otp",1,"form-control"],[1,"back","mt-3","text-right","small"],[3,"click"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Pb(1,"div",1),a.Lb(2,"img",2),a.hc(3,l,11,1,"ng-container",3),a.hc(4,f,14,1,"ng-container",3),a.Ob(),a.Ob()),2&t&&(a.zb(3),a.ac("ngIf",1===e.step),a.zb(1),a.ac("ngIf",2===e.step))},directives:[p.i,r.j,r.f,r.d,r.a,r.e,r.c],styles:[".body[_ngcontent-%COMP%]{color:#262626;background-image:url(login_bg.1fecce0c9a3d848c0b16.jpg);background-repeat:no-repeat;background-size:cover;background-position:50%;display:flex;align-items:center;justify-content:center;padding-top:40px;padding-bottom:40px}.body[_ngcontent-%COMP%]   .form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:0 auto}.body[_ngcontent-%COMP%]   .form-signin[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;height:auto;padding:10px}.body[_ngcontent-%COMP%]   .form-signin[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}"]}),d)}],v=((m=function t(){_classCallCheck(this,t)}).\u0275mod=a.Ib({type:m}),m.\u0275inj=a.Hb({factory:function(t){return new(t||m)},imports:[[o.g.forChild(h)],o.g]}),m),O=((g=function t(){_classCallCheck(this,t)}).\u0275mod=a.Ib({type:g}),g.\u0275inj=a.Hb({factory:function(t){return new(t||g)},imports:[[i.a,v]]}),g)}}]);